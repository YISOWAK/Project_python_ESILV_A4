# Project — Python, Git & Linux for Finance (ESILV A4)

Online quantitative dashboard built for an Asset Management workflow:
- **Quant A**: Single-asset analysis + backtesting strategies
- **Quant B**: Multi-asset portfolio simulation + diversification metrics
- **Infra**: Linux deployment, auto-refresh, and daily report generated by cron

## Live Demo (Linux VM)
- Streamlit app: `http://13.39.108.13:8501/`

---

## Features (Core requirements)
✅ Dynamic market data retrieval (Yahoo Finance via `yfinance`)  
✅ Interactive Streamlit dashboard (single asset + portfolio)  
✅ Auto-refresh every **5 minutes** (data cache TTL = 300s)  
✅ Main charts include raw prices + strategy/portfolio equity curves  
✅ Daily risk report generated at fixed time (cron) and stored on the VM  
✅ Codebase structured, modular, and collaborative through GitHub branches & Pull Requests  

---

## Repository Structure

## Repository Structure

```text
app/
  streamlit_app.py              # Main Streamlit entrypoint
  pages/
    1_Single_Asset.py           # Quant A module
    2_Portfolio.py              # Quant B module
  core/
    config.py                   # Assets list + settings
    data.py                     # Data retrieval layer
    strategies.py               # Quant A strategies
    portfolio.py                # Quant B portfolio simulation
    metrics.py                  # Shared risk/performance metrics
daily_report.py                 # Daily report script (cron)
reports/                        # Generated reports on VM (not versioned)
docs/
  devlog.md                     # Optional documentation
requirements.txt
```


## Installation (local)
From the repository root:
streamlit run app/streamlit_app.py
Open: http://localhost:8501


## Auto-refresh (5 minutes)
- Market data retrieval uses @st.cache_data(ttl=300) to refresh data every 5 minutes while limiting API calls.
- Dashboard refresh uses @st.fragment(run_every=300) to update the interface periodically without reloading the full app.

## Daily Report (cron on Linux VM)
- The script daily_report.py generates a daily text report stored locally on the server:
reports/report_YYYY-MM-DD.txt

## Cron configuration (every day at 20:00 Paris time)

Edit crontab: crontab -e
Add the following line (adapt paths if necessary):
0 20 * * * /home/ubuntu/Project_python_ESILV_A4/.venv/bin/python /home/ubuntu/Project_python_ESILV_A4/daily_report.py >> /home/ubuntu/Project_python_ESILV_A4/reports/cron.log 2>&1

Check logs:
tail -n 50 /home/ubuntu/Project_python_ESILV_A4/reports/cron.log


## Keep Streamlit running 24/7 (Linux VM)
The application is deployed as a systemd service to ensure continuous availability and automatic restart.
Service file: /etc/systemd/system/streamlit.service

[Unit]
Description=Streamlit Dashboard
After=network.target

[Service]
User=ubuntu
WorkingDirectory=/home/ubuntu/Project_python_ESILV_A4
Environment="PATH=/home/ubuntu/Project_python_ESILV_A4/.venv/bin"
ExecStart=/home/ubuntu/Project_python_ESILV_A4/.venv/bin/streamlit run app/streamlit_app.py --server.port 8501 --server.address 0.0.0.0
Restart=always

[Install]
WantedBy=multi-user.target

Enable and start the service:
sudo systemctl daemon-reload
sudo systemctl enable streamlit
sudo systemctl start streamlit
sudo systemctl status streamlit



## Collaboration workflow (GitHub)
- Development split into two modules: Quant A and Quant B
- Separate feature branches used for each module
- Integration performed via Pull Requests to ensure clean history and proper separation of work

## Notes
- Annualization uses 252 periods/year by default for comparability.
- Yahoo Finance can be unstable; the code includes retries and empty-data safeguards to prevent crashes.



